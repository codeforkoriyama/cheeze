/*******************************************************************************
 * Regist List
 *
 * Copyright (c) 2015. Code for KORIYAMA. All Rights Reserved.
 *
 * @author: Nobuyuki Kondo
 * @uri: http://koriyama.io/
 * @version: 1.0
 ******************************************************************************/
///<reference path="../../dts/libs/jquery.d.ts" />
///<reference path="../../dts/libs/custom.d.ts" />
///<reference path="../assets/Cmn.ts"/>
///<reference path="../../dts/libs/mustache.d.ts"/>
///<reference path="../assets/Events.ts"/>
///<reference path="Mapping.ts"/>
var Register;
var RegistList = (function () {
    function RegistList() {
        this.target = {
            area: '#areaList',
            container: '#areaList-container',
            contents: '#areaList-contents',
            loader: '#areaList-loading',
            menuBtn: '#header-listMenu',
            link: '.jsClick-Process',
            swipeDelete: '.jsSwipe-Delete',
            returnItem: '.jsClick-Return'
        };
        this.easing = {
            easeOutBack: 'cubic-bezier(0.175, 0.885, 0.320, 1.275)'
        };
        this.cls = {
            no_data: 'no_data'
        };
        this.flg = {
            touch: false
        };
        var _t = this, h = Frame.getBrowserHeight() - 40;
        $(_t.target.area).css({ height: h });
        $(_t.target.menuBtn).on('touchend', function (e) {
            e.preventDefault();
            var isFlg = $(this).hasClass('show'), isBtn = $('#btnEdit').hasClass('onEdit');
            if (isBtn === true)
                Maps.closeBtn();
            if (isFlg === false) {
                _t.showList();
            }
            else {
                _t.closeList();
            }
        });
        // Edit or Delete
        $(document).on('click', _t.target.link, function (e) {
            e.preventDefault();
            _t.flg.touch = false;
            var self = $(this), process = self.data('process'), _d = self.parents('.registData');
            _t.listProcess(process, _d);
        });
        // Swipe Delete
        $(document).on({
            'touchstart.swipe': function (e) {
                if (_t.flg.touch === false)
                    return false;
                var touch = e.originalEvent.touches;
                this.start_x = touch[0].pageX;
                this.start_y = touch[0].pageY;
                this.start_time = e.timeStamp;
            },
            'touchmove.swipe': function (e) {
                if (_t.flg.touch === false)
                    return false;
                var touch = e.originalEvent.touches;
                this.end_time = e.timeStamp;
                this.move_x = touch[0].pageX - this.start_x;
                this.move_y = touch[0].pageY - this.start_y;
                if (this.move_x < 0) {
                    $(this).css({
                        '-webkit-transform': 'translate3d(' + this.move_x + 'px, 0, 0)',
                        'transform': 'translate3d(' + this.move_x + 'px, 0, 0)',
                        '-webkit-transition': 'none',
                        'transition': 'none'
                    });
                }
            },
            'touchend.swipe': function (e) {
                if (_t.flg.touch === false)
                    return false;
                var move_diff = this.start_x - this.move_x, time_diff = this.end_time - this.start_time, end_x = 0, speed = '0.3s', easing = _t.easing.easeOutBack; // ease out back
                if (move_diff >= 350) {
                    end_x = -100;
                    speed = '0.3s';
                    easing = 'ease';
                }
                $(this).css({
                    'webkit-transform': 'translate3d(' + end_x + '%, 0, 0)',
                    'transform': 'translate3d(' + end_x + '%, 0, 0)',
                    '-webkit-transition': '-webkit-transform ' + speed + ' ' + easing,
                    'transition': 'transform ' + speed + ' ' + easing
                }).on(EVENTS.animation.end, function () {
                    var _self = $(this), _data = _self.parents('.registData'), timer = 0, flg = true;
                    _self.off(EVENTS.animation.end);
                    if (end_x === -100) {
                        setTimeout(function () {
                            // 削除処理
                            if (flg === true) {
                                _data.addClass('delete').on(EVENTS.animation.end, function () {
                                    $(this).off(EVENTS.animation.end).remove();
                                });
                                var _id = _data.data('id');
                                Register.deleteData(_id, _data);
                            }
                        }, 3000);
                        // 削除取り消し
                        _data.find(_t.target.returnItem).on('touchend', function (e) {
                            e.preventDefault();
                            var speed = '0.3s';
                            clearTimeout(timer);
                            flg = false;
                            $(this).parents('.registData').find('.registData-show').css({
                                'webkit-transform': 'translate3d(0, 0, 0)',
                                'transform': 'translate3d(0, 0, 0)',
                                '-webkit-transition': '-webkit-transform ' + speed + ' ' + _t.easing.easeOutBack,
                                'transition': 'transform ' + speed + ' ' + _t.easing.easeOutBack
                            });
                        });
                    }
                });
            }
        }, _t.target.swipeDelete);
    }
    /**
     * 登録データ領域の表示
     */
    RegistList.prototype.showList = function () {
        var _t = this;
        $(_t.target.menuBtn).addClass('show');
        $('body').addClass('noScroll');
        $(_t.target.area).addClass('show').on(EVENTS.animation.end, function () {
            $(this).off(EVENTS.animation.end);
            // 登録リストのデータ取得
            _t.getMyData();
            _t.flg.touch = true;
        });
    };
    /**
     * 登録データ領域を閉じる
     */
    RegistList.prototype.closeList = function () {
        var _t = this;
        _t.flg.touch = false;
        $(_t.target.menuBtn).removeClass('show');
        $('body').removeClass('noScroll');
        $(_t.target.area).removeClass('show').on(EVENTS.animation.end, function () {
            $(this).off(EVENTS.animation.end);
            // 登録リストの削除
            $(_t.target.loader).removeClass('hide');
            $(_t.target.container).removeClass('show');
            $(_t.target.contents).html('');
        });
    };
    /**
     * ローダーの非表示
     */
    RegistList.prototype.hideLoading = function () {
        $(this.target.loader).addClass('hide');
        $(this.target.container).addClass('show');
    };
    /**
     * 登録データの取得
     */
    RegistList.prototype.getMyData = function () {
        var _t = this, team = $('#form_team').val();
        if (team !== '') {
            var url = Cmn.dir + '/myData/' + encodeURI(team);
            $.ajax({
                type: 'GET',
                url: url,
                scriptCharset: 'utf-8',
                dataType: 'json',
                data: null,
                processData: false,
                contentType: false,
                success: function (res) {
                    switch (res.status) {
                        case 'no_data':
                            _t.noData(res.message);
                            break;
                        case 'success':
                            _t.writeMus(res.data);
                            break;
                    }
                },
                error: function (req, status, thr) {
                    console.log('error:', status);
                },
                complete: function () {
                }
            });
            _t.hideLoading();
        }
        else {
        }
    };
    /**
     * テンプレートに書き込んで表示
     * @param data
     */
    RegistList.prototype.writeMus = function (data) {
        var _this = this;
        var template = Cmn.dir + '/mus/registList.mustache', elem = '';
        $.get(template, function (temp) {
            for (var i = data.length - 1; i >= 0; i--) {
                var obj = data[i];
                obj.dir = Cmn.dir;
                elem += Mustache.render(temp, obj);
            }
            // '<p id="registInfo">text</p>' +
            var _h = '<ol id="registListData">' + elem + '</ol>';
            $(_this.target.contents).removeClass(_this.cls.no_data).html(_h);
        });
    };
    /**
     * データがない場合
     * @param mes
     */
    RegistList.prototype.noData = function (mes) {
        var html = '<p class="noData">' + mes + '</p>';
        $(this.target.contents).addClass(this.cls.no_data).html(html);
    };
    /**
     * 編集 or 削除
     * @param process
     * @param _d
     */
    RegistList.prototype.listProcess = function (process, _d) {
        var regist = {
            id: _d.data('id'),
            name: _d.data('name'),
            map: _d.data('map'),
            cat: _d.data('cat'),
            lat: _d.data('lat'),
            lng: _d.data('lng'),
            file: _d.data('file'),
            thumb: '',
            geo: _d.data('mapGep'),
            created: _d.data('created'),
            updated: _d.data('updated'),
            dir: Cmn.dir
        }, template = Cmn.dir + '/mus/thumbImage.mustache';
        switch (process) {
            case 'edit':
                regist.thumb = regist.file + '_middle';
                var geo = (regist.geo !== '') ? regist.geo : false;
                // データをセット
                $('#areaForm-formName').val(regist.name);
                $('#areaForm-formMapNumber').val(regist.map);
                $('#areaForm-formCategory').val(regist.cat);
                $('#map-lat').val(regist.lat);
                $('#map-lng').val(regist.lng);
                $('#areaForm-dataID').val(regist.id);
                $('#areaForm-photoFile').val(regist.file);
                $('#mapGeo').val(geo);
                $('#areaForm').removeClass('newWrite').addClass('editWrite');
                $.get(template, function (temp) {
                    var elem = Mustache.render(temp, regist);
                    $('#photoThumb').html(elem);
                });
                Maps.openBtn([regist.lat, regist.lng]);
                this.closeList();
                break;
            case 'delete':
                var conf = confirm(Cmn.message.conf.data_delete);
                if (conf === false)
                    return false;
                _d.fadeOut(400, function () {
                    Register.deleteData(regist.id, _d);
                });
                break;
        }
    };
    return RegistList;
})();
new RegistList();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvUmVnaXN0TGlzdC50cyJdLCJuYW1lcyI6WyJSZWdpc3RMaXN0IiwiUmVnaXN0TGlzdC5jb25zdHJ1Y3RvciIsIlJlZ2lzdExpc3Quc2hvd0xpc3QiLCJSZWdpc3RMaXN0LmNsb3NlTGlzdCIsIlJlZ2lzdExpc3QuaGlkZUxvYWRpbmciLCJSZWdpc3RMaXN0LmdldE15RGF0YSIsIlJlZ2lzdExpc3Qud3JpdGVNdXMiLCJSZWdpc3RMaXN0Lm5vRGF0YSIsIlJlZ2lzdExpc3QubGlzdFByb2Nlc3MiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztnRkFRZ0Y7QUFDaEYsa0RBQWtEO0FBQ2xELGtEQUFrRDtBQUNsRCx1Q0FBdUM7QUFDdkMsbURBQW1EO0FBQ25ELDBDQUEwQztBQUMxQyxpQ0FBaUM7QUFFakMsSUFBSSxRQUFZLENBQUM7QUFFakIsSUFBTSxVQUFVO0lBd0JkQSxTQXhCSUEsVUFBVUE7UUFDTkMsV0FBTUEsR0FBR0E7WUFDZkEsSUFBSUEsRUFBT0EsV0FBV0E7WUFDdEJBLFNBQVNBLEVBQUVBLHFCQUFxQkE7WUFDaENBLFFBQVFBLEVBQUdBLG9CQUFvQkE7WUFDL0JBLE1BQU1BLEVBQUtBLG1CQUFtQkE7WUFDOUJBLE9BQU9BLEVBQUlBLGtCQUFrQkE7WUFDN0JBLElBQUlBLEVBQU9BLGtCQUFrQkE7WUFDN0JBLFdBQVdBLEVBQUVBLGlCQUFpQkE7WUFDOUJBLFVBQVVBLEVBQUVBLGlCQUFpQkE7U0FDOUJBLENBQUNBO1FBRU1BLFdBQU1BLEdBQUdBO1lBQ2ZBLFdBQVdBLEVBQUVBLDBDQUEwQ0E7U0FDeERBLENBQUNBO1FBRU1BLFFBQUdBLEdBQUdBO1lBQ1pBLE9BQU9BLEVBQUVBLFNBQVNBO1NBQ25CQSxDQUFDQTtRQUVNQSxRQUFHQSxHQUFHQTtZQUNaQSxLQUFLQSxFQUFFQSxLQUFLQTtTQUNiQSxDQUFDQTtRQUdBQSxJQUFJQSxFQUFFQSxHQUFHQSxJQUFJQSxFQUNYQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBO1FBRXBDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFDQSxDQUFDQSxDQUFDQTtRQUduQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsVUFBVUEsRUFBRUEsVUFBVUEsQ0FBQ0E7WUFDN0MsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ25CLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQ2xDLEtBQUssR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRTNDLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUM7Z0JBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBRXBDLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNwQixFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDaEIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNqQixDQUFDO1FBQ0gsQ0FBQyxDQUFDQSxDQUFDQTtRQUVIQSxBQUNBQSxpQkFEaUJBO1FBQ2pCQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxPQUFPQSxFQUFFQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxFQUFFQSxVQUFVQSxDQUFDQTtZQUNqRCxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7WUFFbkIsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBRXJCLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFDaEIsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQzlCLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRW5DLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQ0EsQ0FBQ0E7UUFHSEEsQUFDQUEsZUFEZUE7UUFDZkEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0E7WUFDYkEsa0JBQWtCQSxFQUFFQSxVQUFTQSxDQUFDQTtnQkFDNUIsRUFBRSxDQUFBLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO29CQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBRXhDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDOUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBQ2hDLENBQUM7WUFDREEsaUJBQWlCQSxFQUFFQSxVQUFTQSxDQUFDQTtnQkFDM0IsRUFBRSxDQUFBLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO29CQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBRXhDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUM7Z0JBRTVCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO2dCQUM1QyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFHNUMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNuQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO3dCQUNWLG1CQUFtQixFQUFHLGNBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVc7d0JBQ2hFLFdBQVcsRUFBVyxjQUFjLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxXQUFXO3dCQUNoRSxvQkFBb0IsRUFBRSxNQUFNO3dCQUM1QixZQUFZLEVBQVUsTUFBTTtxQkFDN0IsQ0FBQyxDQUFDO2dCQUNMLENBQUM7WUFDSCxDQUFDO1lBQ0RBLGdCQUFnQkEsRUFBRUEsVUFBU0EsQ0FBQ0E7Z0JBQzFCLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQztvQkFBQyxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUV4QyxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3hDLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQzNDLEtBQUssR0FBRyxDQUFDLEVBQ1QsS0FBSyxHQUFHLE1BQU0sRUFDZCxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUssZ0JBQWdCO2dCQUVyRCxFQUFFLENBQUEsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLENBQUEsQ0FBQztvQkFDbkIsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDO29CQUNiLEtBQUssR0FBRyxNQUFNLENBQUM7b0JBQ2YsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDbEIsQ0FBQztnQkFFRCxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO29CQUNWLGtCQUFrQixFQUFFLGNBQWMsR0FBRyxLQUFLLEdBQUcsVUFBVTtvQkFDdkQsV0FBVyxFQUFFLGNBQWMsR0FBRyxLQUFLLEdBQUcsVUFBVTtvQkFDaEQsb0JBQW9CLEVBQUUsb0JBQW9CLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRSxNQUFNO29CQUNoRSxZQUFZLEVBQUUsWUFBWSxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUUsTUFBTTtpQkFDakQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTtvQkFDMUIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUNqQixLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFDcEMsS0FBSyxHQUFHLENBQUMsRUFDVCxHQUFHLEdBQUcsSUFBSSxDQUFDO29CQUViLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFFaEMsRUFBRSxDQUFBLENBQUMsS0FBSyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDbEIsVUFBVSxDQUFDOzRCQUVULEFBQ0EsT0FETzs0QkFDUCxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztnQ0FDakIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7b0NBQ2hELENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQ0FDN0MsQ0FBQyxDQUFDLENBQUM7Z0NBRUgsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQ0FDM0IsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7NEJBQ2xDLENBQUM7d0JBQ0gsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO3dCQUdULEFBQ0EsU0FEUzt3QkFDVCxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUM7NEJBQ3pELENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQzs0QkFDbkIsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDOzRCQUVuQixZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BCLEdBQUcsR0FBRyxLQUFLLENBQUM7NEJBRVosQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0NBQzFELGtCQUFrQixFQUFJLHNCQUFzQjtnQ0FDNUMsV0FBVyxFQUFXLHNCQUFzQjtnQ0FDNUMsb0JBQW9CLEVBQUUsb0JBQW9CLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVc7Z0NBQ2hGLFlBQVksRUFBVSxZQUFZLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVc7NkJBQ3pFLENBQUMsQ0FBQTt3QkFDSixDQUFDLENBQUMsQ0FBQztvQkFDTCxDQUFDO2dCQUNILENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztTQUNGQSxFQUFFQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxXQUFXQSxDQUFDQSxDQUFDQTtJQUs1QkEsQ0FBQ0E7SUFFREQ7O09BRUdBO0lBQ0hBLDZCQUFRQSxHQUFSQTtRQUNFRSxJQUFJQSxFQUFFQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUVkQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUN0Q0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLEVBQUVBO1lBQzFELENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsQyxBQUNBLGNBRGM7WUFDZCxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFFZixFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDdEIsQ0FBQyxDQUFDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUVERjs7T0FFR0E7SUFDSEEsOEJBQVNBLEdBQVRBO1FBQ0VHLElBQUlBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBO1FBRWRBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLEdBQUdBLEtBQUtBLENBQUNBO1FBRXJCQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxXQUFXQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUN6Q0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDbENBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLENBQUNBLFdBQVdBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLEVBQUVBO1lBQzdELENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsQyxBQUNBLFdBRFc7WUFDWCxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FB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LGFBQWFBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO2dCQUM5QkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBRUhBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO2dCQUN2Q0EsSUFBSUEsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0E7Z0JBQ2pCQSxLQUFLQSxDQUFDQTtZQUNSQSxLQUFLQSxRQUFRQTtnQkFDWEEsSUFBSUEsSUFBSUEsR0FBR0EsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0E7Z0JBRWpEQSxFQUFFQSxDQUFDQSxDQUFDQSxJQUFJQSxLQUFLQSxLQUFLQSxDQUFDQTtvQkFBQ0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7Z0JBRWpDQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxFQUFFQTtvQkFDZCxRQUFRLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7Z0JBQ3JDLENBQUMsQ0FBQ0EsQ0FBQ0E7Z0JBQ0hBLEtBQUtBLENBQUNBO1FBQ1ZBLENBQUNBO0lBQ0hBLENBQUNBO0lBQ0hSLGlCQUFDQTtBQUFEQSxDQXJWQSxBQXFWQ0EsSUFBQTtBQUVELElBQUksVUFBVSxFQUFFLENBQUMiLCJmaWxlIjoicGx1Z2lucy9SZWdpc3RMaXN0LmpzIiwic291cmNlUm9vdCI6Ii4uL193cy90eXBlc2NyaXB0LyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBSZWdpc3QgTGlzdFxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNS4gQ29kZSBmb3IgS09SSVlBTUEuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogQGF1dGhvcjogTm9idXl1a2kgS29uZG9cbiAqIEB1cmk6IGh0dHA6Ly9rb3JpeWFtYS5pby9cbiAqIEB2ZXJzaW9uOiAxLjBcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9kdHMvbGlicy9qcXVlcnkuZC50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9kdHMvbGlicy9jdXN0b20uZC50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9hc3NldHMvQ21uLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vZHRzL2xpYnMvbXVzdGFjaGUuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL2Fzc2V0cy9FdmVudHMudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJNYXBwaW5nLnRzXCIvPlxuXG52YXIgUmVnaXN0ZXI6YW55O1xuXG5jbGFzcyBSZWdpc3RMaXN0IHtcbiAgcHJpdmF0ZSB0YXJnZXQgPSB7XG4gICAgYXJlYSAgICAgOiAnI2FyZWFMaXN0JyxcbiAgICBjb250YWluZXI6ICcjYXJlYUxpc3QtY29udGFpbmVyJyxcbiAgICBjb250ZW50cyA6ICcjYXJlYUxpc3QtY29udGVudHMnLFxuICAgIGxvYWRlciAgIDogJyNhcmVhTGlzdC1sb2FkaW5nJyxcbiAgICBtZW51QnRuICA6ICcjaGVhZGVyLWxpc3RNZW51JyxcbiAgICBsaW5rICAgICA6ICcuanNDbGljay1Qcm9jZXNzJyxcbiAgICBzd2lwZURlbGV0ZTogJy5qc1N3aXBlLURlbGV0ZScsXG4gICAgcmV0dXJuSXRlbTogJy5qc0NsaWNrLVJldHVybidcbiAgfTtcblxuICBwcml2YXRlIGVhc2luZyA9IHtcbiAgICBlYXNlT3V0QmFjazogJ2N1YmljLWJlemllcigwLjE3NSwgMC44ODUsIDAuMzIwLCAxLjI3NSknXG4gIH07XG5cbiAgcHJpdmF0ZSBjbHMgPSB7XG4gICAgbm9fZGF0YTogJ25vX2RhdGEnXG4gIH07XG5cbiAgcHJpdmF0ZSBmbGcgPSB7XG4gICAgdG91Y2g6IGZhbHNlXG4gIH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdmFyIF90ID0gdGhpcyxcbiAgICAgIGggPSBGcmFtZS5nZXRCcm93c2VySGVpZ2h0KCkgLSA0MDtcblxuICAgICQoX3QudGFyZ2V0LmFyZWEpLmNzcyh7aGVpZ2h0OiBofSk7XG5cblxuICAgICQoX3QudGFyZ2V0Lm1lbnVCdG4pLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgaXNGbGcgPSAkKHRoaXMpLmhhc0NsYXNzKCdzaG93JyksXG4gICAgICAgIGlzQnRuID0gJCgnI2J0bkVkaXQnKS5oYXNDbGFzcygnb25FZGl0Jyk7XG5cbiAgICAgIGlmIChpc0J0biA9PT0gdHJ1ZSkgTWFwcy5jbG9zZUJ0bigpO1xuXG4gICAgICBpZiAoaXNGbGcgPT09IGZhbHNlKSB7XG4gICAgICAgIF90LnNob3dMaXN0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdC5jbG9zZUxpc3QoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEVkaXQgb3IgRGVsZXRlXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgX3QudGFyZ2V0LmxpbmssIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIF90LmZsZy50b3VjaCA9IGZhbHNlO1xuXG4gICAgICB2YXIgc2VsZiA9ICQodGhpcyksXG4gICAgICAgIHByb2Nlc3MgPSBzZWxmLmRhdGEoJ3Byb2Nlc3MnKSxcbiAgICAgICAgX2QgPSBzZWxmLnBhcmVudHMoJy5yZWdpc3REYXRhJyk7XG5cbiAgICAgIF90Lmxpc3RQcm9jZXNzKHByb2Nlc3MsIF9kKTtcbiAgICB9KTtcblxuXG4gICAgLy8gU3dpcGUgRGVsZXRlXG4gICAgJChkb2N1bWVudCkub24oe1xuICAgICAgJ3RvdWNoc3RhcnQuc3dpcGUnOiBmdW5jdGlvbihlKXtcbiAgICAgICAgaWYoX3QuZmxnLnRvdWNoID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHZhciB0b3VjaCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzO1xuICAgICAgICB0aGlzLnN0YXJ0X3ggPSB0b3VjaFswXS5wYWdlWDtcbiAgICAgICAgdGhpcy5zdGFydF95ID0gdG91Y2hbMF0ucGFnZVk7XG4gICAgICAgIHRoaXMuc3RhcnRfdGltZSA9IGUudGltZVN0YW1wO1xuICAgICAgfSxcbiAgICAgICd0b3VjaG1vdmUuc3dpcGUnOiBmdW5jdGlvbihlKXtcbiAgICAgICAgaWYoX3QuZmxnLnRvdWNoID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHZhciB0b3VjaCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzO1xuICAgICAgICB0aGlzLmVuZF90aW1lID0gZS50aW1lU3RhbXA7XG5cbiAgICAgICAgdGhpcy5tb3ZlX3ggPSB0b3VjaFswXS5wYWdlWCAtIHRoaXMuc3RhcnRfeDtcbiAgICAgICAgdGhpcy5tb3ZlX3kgPSB0b3VjaFswXS5wYWdlWSAtIHRoaXMuc3RhcnRfeTtcblxuXG4gICAgICAgIGlmKHRoaXMubW92ZV94IDwgMCkge1xuICAgICAgICAgICQodGhpcykuY3NzKHtcbiAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybScgOiAndHJhbnNsYXRlM2QoJyArIHRoaXMubW92ZV94ICsgJ3B4LCAwLCAwKScsXG4gICAgICAgICAgICAndHJhbnNmb3JtJyAgICAgICAgIDogJ3RyYW5zbGF0ZTNkKCcgKyB0aGlzLm1vdmVfeCArICdweCwgMCwgMCknLFxuICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6ICdub25lJyxcbiAgICAgICAgICAgICd0cmFuc2l0aW9uJyAgICAgICAgOiAnbm9uZSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICd0b3VjaGVuZC5zd2lwZSc6IGZ1bmN0aW9uKGUpe1xuICAgICAgICBpZihfdC5mbGcudG91Y2ggPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIG1vdmVfZGlmZiA9IHRoaXMuc3RhcnRfeCAtIHRoaXMubW92ZV94LFxuICAgICAgICAgIHRpbWVfZGlmZiA9IHRoaXMuZW5kX3RpbWUgLSB0aGlzLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgZW5kX3ggPSAwLFxuICAgICAgICAgIHNwZWVkID0gJzAuM3MnLFxuICAgICAgICAgIGVhc2luZyA9IF90LmVhc2luZy5lYXNlT3V0QmFjazsgICAgLy8gZWFzZSBvdXQgYmFja1xuXG4gICAgICAgIGlmKG1vdmVfZGlmZiA+PSAzNTApe1xuICAgICAgICAgIGVuZF94ID0gLTEwMDtcbiAgICAgICAgICBzcGVlZCA9ICcwLjNzJztcbiAgICAgICAgICBlYXNpbmcgPSAnZWFzZSc7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMpLmNzcyh7XG4gICAgICAgICAgJ3dlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoJyArIGVuZF94ICsgJyUsIDAsIDApJyxcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKCcgKyBlbmRfeCArICclLCAwLCAwKScsXG4gICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbic6ICctd2Via2l0LXRyYW5zZm9ybSAnICsgc3BlZWQgKyAnICcrIGVhc2luZyxcbiAgICAgICAgICAndHJhbnNpdGlvbic6ICd0cmFuc2Zvcm0gJyArIHNwZWVkICsgJyAnKyBlYXNpbmdcbiAgICAgICAgfSkub24oRVZFTlRTLmFuaW1hdGlvbi5lbmQsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdmFyIF9zZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgIF9kYXRhID0gX3NlbGYucGFyZW50cygnLnJlZ2lzdERhdGEnKSxcbiAgICAgICAgICAgIHRpbWVyID0gMCxcbiAgICAgICAgICAgIGZsZyA9IHRydWU7XG5cbiAgICAgICAgICBfc2VsZi5vZmYoRVZFTlRTLmFuaW1hdGlvbi5lbmQpO1xuXG4gICAgICAgICAgaWYoZW5kX3ggPT09IC0xMDApIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XG5cbiAgICAgICAgICAgICAgLy8g5YmK6Zmk5Yem55CGXG4gICAgICAgICAgICAgIGlmIChmbGcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfZGF0YS5hZGRDbGFzcygnZGVsZXRlJykub24oRVZFTlRTLmFuaW1hdGlvbi5lbmQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICQodGhpcykub2ZmKEVWRU5UUy5hbmltYXRpb24uZW5kKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBfaWQgPSBfZGF0YS5kYXRhKCdpZCcpO1xuICAgICAgICAgICAgICAgIFJlZ2lzdGVyLmRlbGV0ZURhdGEoX2lkLCBfZGF0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDMwMDApO1xuXG5cbiAgICAgICAgICAgIC8vIOWJiumZpOWPluOCiua2iOOBl1xuICAgICAgICAgICAgX2RhdGEuZmluZChfdC50YXJnZXQucmV0dXJuSXRlbSkub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICB2YXIgc3BlZWQgPSAnMC4zcyc7XG5cbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgICAgZmxnID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucmVnaXN0RGF0YScpLmZpbmQoJy5yZWdpc3REYXRhLXNob3cnKS5jc3Moe1xuICAgICAgICAgICAgICAgICd3ZWJraXQtdHJhbnNmb3JtJyAgOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nICAgICAgICAgOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLFxuICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24nOiAnLXdlYmtpdC10cmFuc2Zvcm0gJyArIHNwZWVkICsgJyAnICsgX3QuZWFzaW5nLmVhc2VPdXRCYWNrLFxuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uJyAgICAgICAgOiAndHJhbnNmb3JtICcgKyBzcGVlZCArICcgJyArIF90LmVhc2luZy5lYXNlT3V0QmFja1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBfdC50YXJnZXQuc3dpcGVEZWxldGUpO1xuXG5cblxuXG4gIH1cblxuICAvKipcbiAgICog55m76Yyy44OH44O844K/6aCY5Z+f44Gu6KGo56S6XG4gICAqL1xuICBzaG93TGlzdCgpIHtcbiAgICB2YXIgX3QgPSB0aGlzO1xuXG4gICAgJChfdC50YXJnZXQubWVudUJ0bikuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ25vU2Nyb2xsJyk7XG4gICAgJChfdC50YXJnZXQuYXJlYSkuYWRkQ2xhc3MoJ3Nob3cnKS5vbihFVkVOVFMuYW5pbWF0aW9uLmVuZCwgZnVuY3Rpb24gKCkge1xuICAgICAgJCh0aGlzKS5vZmYoRVZFTlRTLmFuaW1hdGlvbi5lbmQpO1xuICAgICAgLy8g55m76Yyy44Oq44K544OI44Gu44OH44O844K/5Y+W5b6XXG4gICAgICBfdC5nZXRNeURhdGEoKTtcblxuICAgICAgX3QuZmxnLnRvdWNoID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnmbvpjLLjg4fjg7zjgr/poJjln5/jgpLplonjgZjjgotcbiAgICovXG4gIGNsb3NlTGlzdCgpIHtcbiAgICB2YXIgX3QgPSB0aGlzO1xuXG4gICAgX3QuZmxnLnRvdWNoID0gZmFsc2U7XG5cbiAgICAkKF90LnRhcmdldC5tZW51QnRuKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbm9TY3JvbGwnKTtcbiAgICAkKF90LnRhcmdldC5hcmVhKS5yZW1vdmVDbGFzcygnc2hvdycpLm9uKEVWRU5UUy5hbmltYXRpb24uZW5kLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKHRoaXMpLm9mZihFVkVOVFMuYW5pbWF0aW9uLmVuZCk7XG4gICAgICAvLyDnmbvpjLLjg6rjgrnjg4jjga7liYrpmaRcbiAgICAgICQoX3QudGFyZ2V0LmxvYWRlcikucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICQoX3QudGFyZ2V0LmNvbnRhaW5lcikucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICQoX3QudGFyZ2V0LmNvbnRlbnRzKS5odG1sKCcnKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIOODreODvOODgOODvOOBrumdnuihqOekulxuICAgKi9cbiAgaGlkZUxvYWRpbmcoKSB7XG4gICAgJCh0aGlzLnRhcmdldC5sb2FkZXIpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCh0aGlzLnRhcmdldC5jb250YWluZXIpLmFkZENsYXNzKCdzaG93Jyk7XG4gIH1cblxuICAvKipcbiAgICog55m76Yyy44OH44O844K/44Gu5Y+W5b6XXG4gICAqL1xuICBnZXRNeURhdGEoKSB7XG4gICAgdmFyIF90ID0gdGhpcyxcbiAgICAgIHRlYW0gPSAkKCcjZm9ybV90ZWFtJykudmFsKCk7XG5cbiAgICBpZiAodGVhbSAhPT0gJycpIHtcbiAgICAgIHZhciB1cmwgPSBDbW4uZGlyICsgJy9teURhdGEvJyArIGVuY29kZVVSSSh0ZWFtKTtcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgdHlwZSAgICAgICAgIDogJ0dFVCcsXG4gICAgICAgIHVybCAgICAgICAgICA6IHVybCxcbiAgICAgICAgc2NyaXB0Q2hhcnNldDogJ3V0Zi04JyxcbiAgICAgICAgZGF0YVR5cGUgICAgIDogJ2pzb24nLFxuICAgICAgICBkYXRhICAgICAgICAgOiBudWxsLFxuICAgICAgICBwcm9jZXNzRGF0YSAgOiBmYWxzZSxcbiAgICAgICAgY29udGVudFR5cGUgIDogZmFsc2UsXG4gICAgICAgIHN1Y2Nlc3MgICAgICA6IChyZXMpPT4ge1xuICAgICAgICAgIHN3aXRjaCAocmVzLnN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSAnbm9fZGF0YSc6XG4gICAgICAgICAgICAgIF90Lm5vRGF0YShyZXMubWVzc2FnZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3VjY2Vzcyc6XG4gICAgICAgICAgICAgIF90LndyaXRlTXVzKHJlcy5kYXRhKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvciAgICAgICAgOiAocmVxLCBzdGF0dXMsIHRocik9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOicsIHN0YXR1cyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlICAgICA6ICgpPT4ge1xuICAgICAgICB9XG4gICAgICB9KTtcblxuXG4gICAgICBfdC5oaWRlTG9hZGluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDjg4Hjg7zjg6DlkI3jgYzjgarjgYTloLTlkIhcbiAgICAgIC8vX3QuaGlkZUxvYWRpbmcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog44OG44Oz44OX44Os44O844OI44Gr5pu444GN6L6844KT44Gn6KGo56S6XG4gICAqIEBwYXJhbSBkYXRhXG4gICAqL1xuICB3cml0ZU11cyhkYXRhKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gQ21uLmRpciArICcvbXVzL3JlZ2lzdExpc3QubXVzdGFjaGUnLFxuICAgICAgZWxlbSA9ICcnO1xuXG4gICAgJC5nZXQodGVtcGxhdGUsICh0ZW1wKT0+IHtcbiAgICAgIGZvciAodmFyIGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHZhciBvYmogPSBkYXRhW2ldO1xuXG4gICAgICAgIG9iai5kaXIgPSBDbW4uZGlyO1xuICAgICAgICBlbGVtICs9IE11c3RhY2hlLnJlbmRlcih0ZW1wLCBvYmopO1xuICAgICAgfVxuXG4gICAgICAvLyAnPHAgaWQ9XCJyZWdpc3RJbmZvXCI+dGV4dDwvcD4nICtcblxuICAgICAgdmFyIF9oID0gJzxvbCBpZD1cInJlZ2lzdExpc3REYXRhXCI+JyArIGVsZW0gKyAnPC9vbD4nO1xuXG4gICAgICAkKHRoaXMudGFyZ2V0LmNvbnRlbnRzKS5yZW1vdmVDbGFzcyh0aGlzLmNscy5ub19kYXRhKS5odG1sKF9oKTtcbiAgICB9KTtcblxuXG4gIH1cblxuICAvKipcbiAgICog44OH44O844K/44GM44Gq44GE5aC05ZCIXG4gICAqIEBwYXJhbSBtZXNcbiAgICovXG4gIG5vRGF0YShtZXMpIHtcbiAgICB2YXIgaHRtbCA9ICc8cCBjbGFzcz1cIm5vRGF0YVwiPicgKyBtZXMgKyAnPC9wPic7XG5cbiAgICAkKHRoaXMudGFyZ2V0LmNvbnRlbnRzKS5hZGRDbGFzcyh0aGlzLmNscy5ub19kYXRhKS5odG1sKGh0bWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIOe3qOmbhiBvciDliYrpmaRcbiAgICogQHBhcmFtIHByb2Nlc3NcbiAgICogQHBhcmFtIF9kXG4gICAqL1xuICBsaXN0UHJvY2Vzcyhwcm9jZXNzLCBfZCkge1xuICAgIHZhciByZWdpc3QgPSB7XG4gICAgICAgIGlkICAgICA6IF9kLmRhdGEoJ2lkJyksXG4gICAgICAgIG5hbWUgICA6IF9kLmRhdGEoJ25hbWUnKSxcbiAgICAgICAgbWFwICAgIDogX2QuZGF0YSgnbWFwJyksXG4gICAgICAgIGNhdCAgICA6IF9kLmRhdGEoJ2NhdCcpLFxuICAgICAgICBsYXQgICAgOiBfZC5kYXRhKCdsYXQnKSxcbiAgICAgICAgbG5nICAgIDogX2QuZGF0YSgnbG5nJyksXG4gICAgICAgIGZpbGUgICA6IF9kLmRhdGEoJ2ZpbGUnKSxcbiAgICAgICAgdGh1bWI6ICcnLFxuICAgICAgICBnZW8gICAgOiBfZC5kYXRhKCdtYXBHZXAnKSxcbiAgICAgICAgY3JlYXRlZDogX2QuZGF0YSgnY3JlYXRlZCcpLFxuICAgICAgICB1cGRhdGVkOiBfZC5kYXRhKCd1cGRhdGVkJyksXG4gICAgICAgIGRpciAgICA6IENtbi5kaXJcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZSA9IENtbi5kaXIgKyAnL211cy90aHVtYkltYWdlLm11c3RhY2hlJztcblxuICAgIC8vIOWHpueQhuaWueazleOBp+ODr+OCseODq1xuICAgIHN3aXRjaCAocHJvY2Vzcykge1xuICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgIHJlZ2lzdC50aHVtYiA9IHJlZ2lzdC5maWxlICsgJ19taWRkbGUnO1xuXG4gICAgICAgIHZhciBnZW8gPSAocmVnaXN0LmdlbyAhPT0gJycpID8gcmVnaXN0LmdlbyA6IGZhbHNlO1xuXG4gICAgICAgIC8vIOODh+ODvOOCv+OCkuOCu+ODg+ODiFxuICAgICAgICAkKCcjYXJlYUZvcm0tZm9ybU5hbWUnKS52YWwocmVnaXN0Lm5hbWUpO1xuICAgICAgICAkKCcjYXJlYUZvcm0tZm9ybU1hcE51bWJlcicpLnZhbChyZWdpc3QubWFwKTtcbiAgICAgICAgJCgnI2FyZWFGb3JtLWZvcm1DYXRlZ29yeScpLnZhbChyZWdpc3QuY2F0KTtcbiAgICAgICAgJCgnI21hcC1sYXQnKS52YWwocmVnaXN0LmxhdCk7XG4gICAgICAgICQoJyNtYXAtbG5nJykudmFsKHJlZ2lzdC5sbmcpO1xuICAgICAgICAkKCcjYXJlYUZvcm0tZGF0YUlEJykudmFsKHJlZ2lzdC5pZCk7XG4gICAgICAgICQoJyNhcmVhRm9ybS1waG90b0ZpbGUnKS52YWwocmVnaXN0LmZpbGUpO1xuICAgICAgICAkKCcjbWFwR2VvJykudmFsKGdlbyk7XG5cbiAgICAgICAgJCgnI2FyZWFGb3JtJykucmVtb3ZlQ2xhc3MoJ25ld1dyaXRlJykuYWRkQ2xhc3MoJ2VkaXRXcml0ZScpO1xuXG4gICAgICAgICQuZ2V0KHRlbXBsYXRlLCAodGVtcCk9PiB7XG4gICAgICAgICAgdmFyIGVsZW0gPSBNdXN0YWNoZS5yZW5kZXIodGVtcCwgcmVnaXN0KTtcblxuICAgICAgICAgICQoJyNwaG90b1RodW1iJykuaHRtbChlbGVtKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgTWFwcy5vcGVuQnRuKFtyZWdpc3QubGF0LCByZWdpc3QubG5nXSk7XG4gICAgICAgIHRoaXMuY2xvc2VMaXN0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgdmFyIGNvbmYgPSBjb25maXJtKENtbi5tZXNzYWdlLmNvbmYuZGF0YV9kZWxldGUpO1xuXG4gICAgICAgIGlmIChjb25mID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIF9kLmZhZGVPdXQoNDAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgUmVnaXN0ZXIuZGVsZXRlRGF0YShyZWdpc3QuaWQsIF9kKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5uZXcgUmVnaXN0TGlzdCgpO1xuIl19